---
layout: single
title: "WSL"
date: 2025-10-15
categories: [notes]      # or a single string: category: notes
tags: [jekyll, howto]
classes: wide
---
---
title: "WSL Notes"
description: "A living document of how WSL and practical tips to use it."
last_updated: 2025-10-15
tags: [wsl, linux, windows, bash, powershell, dev-setup]
---

# WSL Notes

> A structured, evolving reference for understanding **WSL (Windows Subsystem for Linux)** from fundamentals to daily workflows, including **Bash vs PowerShell**, **WSL1 vs WSL2**, filesystem interop, networking, performance, automation, and common recipes.

---

## Table of Contents
- [1. First Principles](#1-first-principles)
  - [1.1 What is an OS, kernel, and userspace?](#11-what-is-an-os-kernel-and-userspace)
  - [1.2 Where WSL fits in](#12-where-wsl-fits-in)
  - [1.3 WSL1 vs WSL2](#13-wsl1-vs-wsl2)
- [2. Shells & Environments](#2-shells--environments)
  - [2.1 Bash (Linux) vs PowerShell (Windows)](#21-bash-linux-vs-powershell-windows)
  - [2.2 Profiles: `.bashrc`, `.profile`, PowerShell profiles](#22-profiles-bashrc-profile-powershell-profiles)
  - [2.3 Environment variables](#23-environment-variables)
- [3. Filesystems & Paths](#3-filesystems--paths)
  - [3.1 WSL filesystem vs Windows drives](#31-wsl-filesystem-vs-windows-drives)
  - [3.2 Performance & file-watching](#32-performance--file-watching)
  - [3.3 Line endings & permissions](#33-line-endings--permissions)
- [4. Processes, Networking, Interop](#4-processes-networking-interop)
  - [4.1 Running Windows apps from WSL & vice versa](#41-running-windows-apps-from-wsl--vice-versa)
  - [4.2 Networking model](#42-networking-model)
  - [4.3 Clipboard & file association tips](#43-clipboard--file-association-tips)
- [5. Package Managers & Toolchains](#5-package-managers--toolchains)
  - [5.1 apt vs winget/choco](#51-apt-vs-wingetchoco)
  - [5.2 Compilers, build tools, Python, Node, Ruby](#52-compilers-build-tools-python-node-ruby)
- [6. Git & Projects](#6-git--projects)
  - [6.1 Where to clone projects](#61-where-to-clone-projects)
  - [6.2 Git config & CRLF handling](#62-git-config--crlf-handling)
- [7. Daily Recipes (Copy-Paste Friendly)](#7-daily-recipes-copy-paste-friendly)
- [8. Troubleshooting & Diagnostics](#8-troubleshooting--diagnostics)
- [9. Security & Backups](#9-security--backups)
- [10. Comparative Analysis (Quick Reference)](#10-comparative-analysis-quick-reference)
- [11. Glossary](#11-glossary)
- [12. Further Reading](#12-further-reading)
- [Appendix A: Personal Setup Checklists](#appendix-a-personal-setup-checklists)
- [Appendix B: Snippets](#appendix-b-snippets)

---

## 1. First Principles

### 1.1 What is an OS, kernel, and userspace?
- **Kernel:** manages hardware, processes, memory, filesystems, networking.
- **Userspace:** shells, tools, libraries, apps.
- **Linux vs Windows:** different kernels → different system calls & tooling.

> Add notes/examples:
- [ ] Example: `strace` (Linux) vs Process Monitor (Windows)  
- [ ] Syscalls vs Win32 APIs

### 1.2 Where WSL fits in
- **WSL** = run a **Linux userspace** on Windows.
- **WSL1:** syscall translation layer → Linux syscalls translated to Windows kernel calls.
- **WSL2:** lightweight VM running a real Linux kernel → higher compatibility/perf, different networking/filesystem behavior.

### 1.3 WSL1 vs WSL2
| Aspect | WSL1 | WSL2 |
|---|---|---|
| Kernel | Translation layer | Real Linux kernel (in a managed VM) |
| FS Perf (Linux home) | N/A | Fast |
| FS Perf (`/mnt/c/...`) | Generally fast | Slower; use for *access*, not hot dev |
| Inotify/File watch | Bridged | Native in Linux FS; flaky on `/mnt/*` |
| Networking | Shares host IP | NAT/virtualized; different IP |
| Compatibility | Good, not perfect | Very high |

> Choose **WSL2** for most dev. Keep repos in **`~/`** (Linux FS). Use `/mnt/*` for occasional access to Windows files.

---

## 2. Shells & Environments

### 2.1 Bash (Linux) vs PowerShell (Windows)
| Topic | Bash | PowerShell |
|---|---|---|
| Prompt style | `$` | `PS C:\>` |
| Scripting | `#!/usr/bin/env bash` | `.ps1`, PowerShell syntax |
| Env var set | `FOO=bar cmd` or `export FOO=bar` | `$env:FOO='bar'; cmd` |
| Path sep | `/home/user` | `C:\Users\User` |
| Pipe objects? | Text streams | .NET objects |

> Use **Bash inside WSL** for Linux tooling & package managers; **PowerShell** for Windows-side automation.

### 2.2 Profiles: `.bashrc`, `.profile`, PowerShell profiles
- **`~/.bashrc`**: runs for interactive Bash shells; good for aliases, exports.
- **`~/.profile` / `~/.bash_profile`**: login shell config.
- **PowerShell profile**: see `$PROFILE` for path; customize aliases & functions.

Common Bash additions:
```bash
# ~/.bashrc
export GEM_HOME="$HOME/.gems"
export PATH="$HOME/.gems/bin:$PATH"
alias ll='ls -lah'
alias jserve='bundle exec jekyll serve --livereload --drafts --future --force_polling'
